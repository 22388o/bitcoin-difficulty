<q-tab-panel name="funding">
  <q-card-section class="q-pa-none">
    <h6 class="q-my-none">Wallets Management</h6>
    <br />
    <div>
      <div class="row">
        <div class="col">
          <p>Funding Source Info</p>
          <ul>
            {%raw%}
            <li>
              Funding Source: {{data.settings.lnbits_backend_wallet_class}}
            </li>
            <li>Balance: {{data.balance / 1000}} sats</li>
            {%endraw%}
          </ul>
          <br />
        </div>
      </div>
      <div class="row q-col-gutter-md">
        <div class="col-12 col-md-6">
          <div class="row">
            <div class="col-12">
              <p>Active Funding<small> (Requires server restart)</small></p>
              <q-select
                filled
                v-model="data.settings.lnbits_backend_wallet_class"
                hint="Select the active funding wallet"
                :options="data.settings.lnbits_funding_sources"
              ></q-select>
              <br />
              <div>
                <q-btn
                  class="q-mt-md float-right"
                  label="Restart Server"
                  color="primary"
                  @click="restartServer"
                ></q-btn>
              </div>
            </div>
            <div class="col-12">
              <p>Fee reserve</p>
              <div class="row q-col-gutter-md">
                <div class="col-6">
                  <q-input
                    dense
                    type="number"
                    filled
                    v-model="data.settings.lnbits_reserve_fee_min"
                    label="Reserve fee in msats"
                  ></q-input>
                </div>
                <div class="col-6">
                  <q-input
                    dense
                    type="number"
                    filled
                    v-model="data.settings.lnbits_reserve_fee_percent"
                    label="Reserve fee in percent"
                    step="0.1"
                  ></q-input>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-6">
          <p>TopUp a wallet</p>
          <div class="row">
            <div class="col-12">
              <q-input
                dense
                type="text"
                filled
                v-model="wallet.data.id"
                label="Wallet ID"
                hint="Use the wallet ID to topup any wallet"
              ></q-input>
              <br />
            </div>
            <div class="col-12">
              <q-input
                dense
                type="number"
                filled
                v-model="wallet.data.amount"
                label="Topup amount"
              ></q-input>
            </div>
          </div>
          <div>
            <q-btn
              class="q-mt-md float-right"
              label="Topup"
              color="primary"
              @click="topupWallet"
            ></q-btn>
          </div>
          <br />
        </div>
      </div>
      <p>Funding Sources</p>
      {% raw %}
      <q-list v-for="fund in data.settings.funding" :key="fund.id">
        <q-expansion-item
          expand-separator
          icon="payments"
          :label="fund.backend_wallet"
        >
          <q-card>
            <q-card-section>
              <q-input
                v-if="fund.endpoint"
                filled
                type="text"
                v-model="fund.endpoint"
                label="Endpoint"
                class="q-pr-md"
              ></q-input>
              <q-input
                v-if="fund.port"
                filled
                type="text"
                v-model="fund.port"
                label="Port"
                class="q-pr-md"
              ></q-input>
              <q-input
                v-if="fund.admin_key"
                filled
                type="text"
                v-model="fund.admin_key"
                label="Admin Key"
                class="q-pr-md"
              ></q-input>
              <q-input
                v-if="fund.cert"
                filled
                type="text"
                v-model="fund.cert"
                label="Location of your ssl cert"
                class="q-pr-md"
              ></q-input>
              <q-btn
                class="q-mt-md"
                label="Save"
                flat
                color="primary"
                @click="updateFunding(fund.backend_wallet)"
              ></q-btn>
            </q-card-section>
          </q-card>
        </q-expansion-item>
      </q-list>
      {% endraw %}
    </div>
  </q-card-section>
</q-tab-panel>
